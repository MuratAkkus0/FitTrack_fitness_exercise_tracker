{% extends 'user_dashboard/dashboard_template.html.twig' %}

{% block dashboard_content %}
	<div class="bg-white rounded-xl shadow-md p-6">
		<div class="flex justify-between items-center mb-6">
			<div>
				<h3 class="text-xl font-bold text-indigo-900">Favorite Exercises</h3>
				<p class="text-gray-600">Your most frequently used exercises</p>
			</div>
			<a href="{{ path('app_exercises_index') }}" class="bg-indigo-500 hover:bg-indigo-600 text-white px-4 py-2 rounded-lg font-medium transition flex items-center">
				<i class="fas fa-arrow-left mr-2"></i>
				Back to Library
			</a>
		</div>

		{% if favoriteExercises is defined and favoriteExercises|length > 0 %}
			<div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4">
				{% for favoriteData in favoriteExercises %}
					{% set exercise = favoriteData[0] %}
					{% set usageCount = favoriteData.usage_count %}
					<div class="exercise-card border border-gray-200 rounded-lg p-4 hover:shadow-md transition">
						<div class="flex justify-between items-start mb-2">
							<h4 class="font-semibold">{{ exercise.name }}</h4>
							<div class="flex items-center space-x-2">
								<span class="bg-orange-100 text-orange-800 px-2 py-1 rounded-full text-xs">
									{{ usageCount }}
									uses
								</span>
								<span class="bg-indigo-100 text-indigo-800 px-2 py-1 rounded-full text-xs">
									{{ exercise.targetMuscleGroup ? exercise.targetMuscleGroup.getLabel() : 'Unknown' }}
								</span>
							</div>
						</div>
						<p class="text-gray-600 text-sm mb-3">{{ exercise.description }}</p>
						<div class="flex justify-between items-center">
							<a href="{{ path('app_exercises_show', {'id': exercise.id}) }}" class="text-indigo-500 hover:text-indigo-700 text-sm">
								<i class="fas fa-eye mr-1"></i>
								View Details
							</a>
							<button class="text-red-500 hover:text-red-700 text-sm">
								<i class="fas fa-heart mr-1"></i>
								Favorited
							</button>
						</div>
					</div>
				{% endfor %}
			</div>
		{% else %}
			<div class="text-center py-12 text-gray-500">
				<i class="fas fa-heart text-6xl text-gray-300 mb-4"></i>
				<p class="text-lg font-medium mb-2">No favorite exercises yet</p>
				<p class="mb-4">Start working out to see your most used exercises here.</p>
				<a href="{{ path('app_exercises_index') }}" class="bg-orange-500 hover:bg-orange-600 text-white px-6 py-3 rounded-lg font-medium transition">
					Browse Exercise Library
				</a>
			</div>
		{% endif %}
	</div>
{% endblock %}
